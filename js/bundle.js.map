{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;AAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,4DAAQ;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;ACzErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;;ACjCzB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;ACTrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kBAAkB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;ACtK7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;;ACtEzB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACoB;;;;;;;UCZpB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACNa;AACb;AAC6C;AACT;AACiB;AACR;AACT;AACpC;AACA;AACA,EAAE,+DAAS;AACX,EAAE,0DAAK;AACP,EAAE,mEAAa;AACf;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE,+DAAS;AACX;AACA,EAAE,0DAAK;AACP,CAAC","sources":["webpack:///./js/modules/forms.js","webpack:///./js/modules/mobile-nav.js","webpack:///./js/modules/modal.js","webpack:///./js/modules/reviews-slider.js","webpack:///./js/modules/yandex-map.js","webpack:///./js/services/services.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./js/script.js"],"sourcesContent":["import { postData } from \"../services/services\";\r\n\r\nfunction forms(selector) {\r\n  const forms = document.querySelectorAll(selector);\r\n\r\n  const titles = {\r\n    consultation: \"Бесплатная консультация\",\r\n    questions: \"Отправка сообщения\",\r\n  };\r\n\r\n  const messages = {\r\n    successConsultation: \"Спасибо! Скоро мы с вами свяжемся!\",\r\n    successQuestions:\r\n      \"Спасибо! Ваше сообщение доставлено! Скоро мы с вами свяжемся!\",\r\n    failure: \"Что-то пошло не так!\",\r\n  };\r\n\r\n  forms.forEach((form) => {\r\n    bindPostData(form);\r\n  });\r\n\r\n  function bindPostData(form) {\r\n    form.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n\r\n      const formSubmitBtn = form.querySelector(\".btn\");\r\n      formSubmitBtn.classList.add(\"btn_loading\");\r\n\r\n      const formData = new FormData(form);\r\n      const json = JSON.stringify(Object.fromEntries(formData.entries()));\r\n\r\n      postData(\"http://localhost:3000/requests\", json)\r\n        .then((data) => {\r\n          console.log(data);\r\n          const formId = form.getAttribute(\"id\");\r\n          const title =\r\n            formId === \"form_consultation\"\r\n              ? titles.consultation\r\n              : titles.questions;\r\n          const message =\r\n            formId === \"form_consultation\"\r\n              ? messages.successConsultation\r\n              : messages.successQuestions;\r\n          showThanksModal(title, message);\r\n          formSubmitBtn.classList.remove(\"btn_loading\");\r\n        })\r\n        .catch(() => {\r\n          showThanksModal(title, messages.failure);\r\n        })\r\n        .finally(() => {\r\n          form.reset();\r\n        });\r\n    });\r\n  }\r\n\r\n  function showThanksModal(title, message) {\r\n    const overlayModal = document.querySelector(\".overlay_modal\");\r\n    const modal = overlayModal.querySelector(\".modal\");\r\n    const modalContent = modal.querySelector(\".modal__content\");\r\n\r\n    modalContent.innerHTML = `\r\n      <h2 class=\"modal__content-title\">\r\n          ${title}\r\n      </h2>\r\n      <div class=\"modal__content-descr\">\r\n          ${message}\r\n      </div>\r\n    `;\r\n\r\n    overlayModal.classList.add(\"overlay_active\");\r\n  }\r\n}\r\n\r\nexport default forms;\r\n","function mobileNav(overlaySelector, openBtn, closeBtn, activeClass) {\r\n  const overlay = document.querySelector(overlaySelector);\r\n  const mobileOpenBtn = document.querySelector(openBtn);\r\n  const mobileCloseBtn = document.querySelector(closeBtn);\r\n  const mobileLinks = overlay.querySelectorAll(\".mobile-nav__link\");\r\n\r\n  mobileLinks.forEach((mobileLink) => {\r\n    mobileLink.addEventListener(\"click\", () => {\r\n      overlay.classList.remove(activeClass);\r\n    });\r\n  });\r\n\r\n  mobileOpenBtn.addEventListener(\"click\", () => {\r\n    overlay.classList.add(activeClass);\r\n  });\r\n\r\n  mobileCloseBtn.addEventListener(\"click\", () => {\r\n    overlay.classList.remove(activeClass);\r\n  });\r\n\r\n  overlay.addEventListener(\"click\", (e) => {\r\n    if (e.target.classList.contains(\"overlay\")) {\r\n      overlay.classList.remove(activeClass);\r\n    }\r\n  });\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (e.code === \"Escape\" && overlay.classList.contains(activeClass)) {\r\n      overlay.classList.remove(activeClass);\r\n    }\r\n  });\r\n}\r\n\r\nexport default mobileNav;\r\n","function modal(overlay, closeBtn, activeClass) {\r\n  const overlayModal = document.querySelector(overlay);\r\n  const modalClose = overlayModal.querySelector(closeBtn);\r\n\r\n  modalClose.addEventListener(\"click\", () => {\r\n    overlayModal.classList.remove(activeClass);\r\n  });\r\n}\r\n\r\nexport default modal;\r\n","function reviewsSlider({\r\n  wrapper,\r\n  reviewsItems,\r\n  prevBtn,\r\n  nextBtn,\r\n  inner,\r\n  activeClass,\r\n}) {\r\n  const reviewsWrapper = document.querySelector(wrapper);\r\n  const reviews = reviewsWrapper.querySelectorAll(reviewsItems);\r\n  const prevReviewBtn = reviewsWrapper.querySelector(prevBtn);\r\n  const nextReviewBtn = reviewsWrapper.querySelector(nextBtn);\r\n  const reviewsInner = reviewsWrapper.querySelector(inner);\r\n  let reviewIndex = 1;\r\n  let offset = 0;\r\n\r\n  reviewsInner.style.maxWidth = setInnerSize();\r\n\r\n  if (reviews.length == 2) {\r\n    reviewsInner.style.transform = `translateX(${(offset -= 201.5)}px)`;\r\n    nextReviewBtn.style.display = \"none\";\r\n  }\r\n\r\n  if (reviews.length == 1) {\r\n    prevReviewBtn.style.display = \"none\";\r\n    nextReviewBtn.style.display = \"none\";\r\n  }\r\n\r\n  prevReviewBtn.addEventListener(\"click\", nextReview);\r\n  nextReviewBtn.addEventListener(\"click\", prevReview);\r\n\r\n  let x1 = null;\r\n  let y1 = null;\r\n\r\n  function handleTouchStart(e) {\r\n    x1 = e.touches[0].clientX;\r\n    y1 = e.touches[0].clientY;\r\n  }\r\n\r\n  function handleTouchMove(e) {\r\n    if (!x1 || !y1) {\r\n      return false;\r\n    }\r\n\r\n    const x2 = e.touches[0].clientX;\r\n    const y2 = e.touches[0].clientY;\r\n\r\n    const xDiff = x2 - x1;\r\n    const yDiff = y2 - y1;\r\n\r\n    if (Math.abs(xDiff) > Math.abs(yDiff)) {\r\n      if (xDiff < 0) {\r\n        prevReview();\r\n      } else {\r\n        nextReview();\r\n      }\r\n    }\r\n\r\n    x1 = null;\r\n    y1 = null;\r\n  }\r\n\r\n  function handleWheel(e) {\r\n    if (e.currentTarget.classList.contains(activeClass)) {\r\n      e.preventDefault();\r\n\r\n      if (e.deltaY < 0) {\r\n        nextReview();\r\n      } else {\r\n        prevReview();\r\n      }\r\n    }\r\n  }\r\n\r\n  if (reviews.length > 1) {\r\n    reviews.forEach((review) => {\r\n      review.addEventListener(\"touchstart\", handleTouchStart, false);\r\n      review.addEventListener(\"touchmove\", handleTouchMove, false);\r\n      review.addEventListener(\"wheel\", handleWheel, false);\r\n    });\r\n  }\r\n\r\n  const mediaQueryMobile = window.matchMedia(\"(max-width: 1000px)\");\r\n\r\n  if (mediaQueryMobile.matches) {\r\n    reviews.forEach((review) => {\r\n      review.removeEventListener(\"wheel\", handleWheel, false);\r\n    });\r\n  }\r\n\r\n  mediaQueryMobile.addEventListener(\"change\", (e) => {\r\n    if (e.matches) {\r\n      reviews.forEach((review) => {\r\n        review.removeEventListener(\"wheel\", handleWheel, false);\r\n      });\r\n    } else {\r\n      reviews.forEach((review) => {\r\n        review.addEventListener(\"wheel\", handleWheel, false);\r\n      });\r\n    }\r\n  });\r\n\r\n  function setInnerSize() {\r\n    const reviewsNotActiveWidth = (reviews.length - 1) * 358;\r\n    const reviewsColumnGupWidth = (reviews.length - 1) * 45;\r\n    const reviewActiveWidth = 606;\r\n\r\n    const resultWidth =\r\n      reviewsNotActiveWidth + reviewsColumnGupWidth + reviewActiveWidth;\r\n\r\n    return `${resultWidth}px`;\r\n  }\r\n\r\n  function changeReviewIndex(value) {\r\n    reviewIndex += value;\r\n\r\n    if (reviewIndex <= 0) {\r\n      reviewIndex = 0;\r\n    }\r\n\r\n    if (reviewIndex >= reviews.length - 1) {\r\n      reviewIndex = reviews.length - 1;\r\n    }\r\n  }\r\n\r\n  function changeReview() {\r\n    reviews.forEach((review) => {\r\n      review.classList.remove(activeClass);\r\n    });\r\n\r\n    reviews[reviewIndex].classList.add(activeClass);\r\n  }\r\n\r\n  function nextReview() {\r\n    if (reviewIndex == 0) {\r\n      return;\r\n    }\r\n\r\n    changeReviewIndex(-1);\r\n    changeReview();\r\n\r\n    if (reviewIndex == 0) {\r\n      prevReviewBtn.style.display = \"none\";\r\n    }\r\n    nextReviewBtn.style.display = \"flex\";\r\n\r\n    reviewsInner.style.transform = `translateX(${(offset += 403)}px)`;\r\n  }\r\n\r\n  function prevReview() {\r\n    if (reviewIndex == reviews.length - 1) {\r\n      return;\r\n    }\r\n\r\n    changeReviewIndex(1);\r\n    changeReview();\r\n\r\n    if (reviewIndex == reviews.length - 1) {\r\n      nextReviewBtn.style.display = \"none\";\r\n    }\r\n    prevReviewBtn.style.display = \"flex\";\r\n\r\n    reviewsInner.style.transform = `translateX(${(offset -= 403)}px)`;\r\n  }\r\n}\r\n\r\nexport default reviewsSlider;\r\n","function yandexMap(mapSelector, balloon, img) {\r\n  // YANDEX MAP\r\n  function init() {\r\n    const map = new ymaps.Map(mapSelector, {\r\n      center: [55.74797656898648, 37.627220499999915],\r\n      zoom: 17,\r\n      controls: [\"zoomControl\"],\r\n    });\r\n\r\n    const myPlacemark = new ymaps.Placemark(\r\n      map.getCenter(),\r\n      {},\r\n      {\r\n        iconLayout: \"default#image\",\r\n        iconImageHref: img,\r\n        iconImageSize: [62, 63],\r\n      }\r\n    );\r\n\r\n    map.geoObjects.add(myPlacemark);\r\n    map.behaviors.disable([\"drag\", \"scrollZoom\", \"dblClickZoom\", \"multiTouch\"]);\r\n\r\n    function closeDesktopBalloon() {\r\n      document.querySelector(balloon).style.display = \"none\";\r\n    }\r\n\r\n    function openBalloon() {\r\n      map.balloon.open(\r\n        [55.74797656898648, 37.627220499999915],\r\n        `\r\n          <div class=\"balloon balloon_mobile\">\r\n            <div class=\"item-title balloon__title\">г. Москва</div>\r\n            <address class=\"item-descr balloon__address\">\r\n              ул. Садовническая, дом 5, офис 4-6 700 от м. Новокузнецкая\r\n              <br />\r\n              Тел: +7 (926) 423 01 00\r\n            </address>\r\n            <div class=\"balloon__link\">\r\n              <a href=\"mailto:info@glopt.ru\">info@glopt.ru</a>\r\n            </div>\r\n          </div>\r\n        `,\r\n        {\r\n          closeButton: false,\r\n          offset: [15, -50],\r\n        }\r\n      );\r\n    }\r\n\r\n    const mediaQueryMap = window.matchMedia(\"(max-width: 800px)\");\r\n\r\n    if (mediaQueryMap.matches) {\r\n      openBalloon();\r\n      closeDesktopBalloon();\r\n    }\r\n\r\n    mediaQueryMap.addEventListener(\"change\", () => {\r\n      if (mediaQueryMap.matches) {\r\n        openBalloon();\r\n        closeDesktopBalloon();\r\n      } else {\r\n        map.balloon.close();\r\n        document.querySelector(balloon).style.display = \"block\";\r\n      }\r\n    });\r\n  }\r\n\r\n  ymaps.ready(init);\r\n}\r\n\r\nexport default yandexMap;\r\n","const postData = async (url, data) => {\r\n  const res = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-type\": \"application/json\",\r\n    },\r\n    body: data,\r\n  });\r\n\r\n  return await res.json();\r\n};\r\n\r\nexport { postData };\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\r\n\r\nimport mobileNav from \"./modules/mobile-nav\";\r\nimport modal from \"./modules/modal\";\r\nimport reviewsSlider from \"./modules/reviews-slider\";\r\nimport yandexMap from \"./modules/yandex-map\";\r\nimport forms from \"./modules/forms\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  mobileNav(\".overlay_mobile\", \".mobile-btn\", \".close-btn\", \"overlay_active\");\r\n  modal(\".overlay_modal\", \".modal__close\", \"overlay_active\");\r\n  reviewsSlider({\r\n    wrapper: \".reviews__wrapper\",\r\n    reviewsItems: \".reviews__item\",\r\n    prevBtn: \".reviews__prev\",\r\n    nextBtn: \".reviews__next\",\r\n    inner: \".reviews__inner\",\r\n    activeClass: \"reviews__item_active\",\r\n  });\r\n  yandexMap(\"map\", \"#desktop-balloon\", \"img/logo/logo-map.png\");\r\n\r\n  forms(\"form\");\r\n});\r\n"],"names":[],"sourceRoot":""}